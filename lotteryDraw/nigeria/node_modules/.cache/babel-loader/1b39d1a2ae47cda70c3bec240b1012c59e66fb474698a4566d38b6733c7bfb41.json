{"ast":null,"code":"import { ref, onMounted, onUnmounted, computed } from 'vue';\nexport default {\n  __name: 'LEDCountdown',\n  props: {\n    label: {\n      type: String,\n      default: '活动倒计时'\n    },\n    totalDuration: {\n      type: Number,\n      default: 60000\n    },\n    labels: {\n      type: Object,\n      default: () => ({\n        minute: '分',\n        second: '秒',\n        millisecond: '毫秒'\n      })\n    }\n  },\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const props = __props;\n\n    // 倒计时状态\n    const timeLeft = ref(props.totalDuration);\n    const showColon = ref(true);\n    let startTime, timer;\n\n    // 计算属性 - 解析时间\n    const minutes = computed(() => Math.floor(timeLeft.value / 1000 / 60));\n    const seconds = computed(() => Math.floor(timeLeft.value / 1000 % 60));\n    const milliseconds = computed(() => Math.floor(timeLeft.value % 1000 / 10));\n\n    // 数字0-9的点阵定义\n    const digitPatterns = {\n      0: [1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1],\n      1: [0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0],\n      2: [1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1],\n      3: [1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1],\n      4: [1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 0],\n      5: [1, 0, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 1],\n      6: [1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1],\n      7: [1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0],\n      8: [1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1],\n      9: [1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1]\n    };\n\n    // 获取数字的点阵模式\n    const getDigitPattern = number => {\n      return digitPatterns[number] || digitPatterns[0];\n    };\n\n    // 更新倒计时\n    const updateCountdown = () => {\n      const now = Date.now();\n      const elapsed = now - startTime;\n      timeLeft.value = Math.max(props.totalDuration - elapsed, 0);\n\n      // 冒号闪烁效果\n      showColon.value = Math.floor(Date.now() / 500) % 2 === 0;\n\n      // 倒计时结束\n      if (timeLeft.value <= 0) {\n        clearInterval(timer);\n      }\n    };\n\n    // 生命周期钩子\n    onMounted(() => {\n      startTime = Date.now();\n      timer = setInterval(updateCountdown, 10); // 每10ms更新一次，以显示毫秒\n    });\n    onUnmounted(() => {\n      if (timer) {\n        clearInterval(timer);\n      }\n    });\n    const __returned__ = {\n      props,\n      timeLeft,\n      showColon,\n      get startTime() {\n        return startTime;\n      },\n      set startTime(v) {\n        startTime = v;\n      },\n      get timer() {\n        return timer;\n      },\n      set timer(v) {\n        timer = v;\n      },\n      minutes,\n      seconds,\n      milliseconds,\n      digitPatterns,\n      getDigitPattern,\n      updateCountdown,\n      ref,\n      onMounted,\n      onUnmounted,\n      computed\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","onUnmounted","computed","props","__props","timeLeft","totalDuration","showColon","startTime","timer","minutes","Math","floor","value","seconds","milliseconds","digitPatterns","getDigitPattern","number","updateCountdown","now","Date","elapsed","max","clearInterval","setInterval"],"sources":["/Users/ajun/projects/github/landing-page/lotteryDraw/nigeria/src/components/countdown/LEDCountdown.vue"],"sourcesContent":["<!-- LEDCountdown.vue -->\n<template>\n  <div class=\"led-countdown-container flex flex-col items-center justify-center\">\n    <h2 class=\"led-title text-xl font-bold mb-4 animate-pulse bg-gradient-to-r from-yellow-400 to-amber-600 bg-clip-text text-transparent\">\n      {{ label }}\n    </h2>\n    \n    <div class=\"led-display flex items-center justify-center bg-black p-4\">\n      <!-- 分钟显示 -->\n      <div class=\"digit-group flex items-center\">\n        <div class=\"led-digit\" :class=\"{ 'small-digit': false }\">\n          <div class=\"pixel-grid\">\n            <div v-for=\"(on, index) in getDigitPattern(Math.floor(minutes / 10))\" :key=\"index\"\n                 class=\"pixel\" :class=\"{ 'active': on && minutes > 0 }\"></div>\n          </div>\n        </div>\n        <div class=\"led-digit\" :class=\"{ 'small-digit': false }\">\n          <div class=\"pixel-grid\">\n            <div v-for=\"(on, index) in getDigitPattern(minutes % 10)\" :key=\"index\"\n                 class=\"pixel\" :class=\"{ 'active': on && minutes > 0 }\"></div>\n          </div>\n        </div>\n      </div>\n      \n      <!-- 冒号 -->\n      <div class=\"colon-separator flex flex-col items-center justify-center mx-1\">\n        <div class=\"colon-pixel\" :class=\"{ 'active': showColon }\"></div>\n        <div class=\"pixel-gap\"></div>\n        <div class=\"colon-pixel\" :class=\"{ 'active': showColon }\"></div>\n      </div>\n      \n      <!-- 秒显示 -->\n      <div class=\"digit-group flex items-center\">\n        <div class=\"led-digit\" :class=\"{ 'small-digit': false }\">\n          <div class=\"pixel-grid\">\n            <div v-for=\"(on, index) in getDigitPattern(Math.floor(seconds / 10))\" :key=\"index\"\n                 class=\"pixel active\"></div>\n          </div>\n        </div>\n        <div class=\"led-digit\" :class=\"{ 'small-digit': false }\">\n          <div class=\"pixel-grid\">\n            <div v-for=\"(on, index) in getDigitPattern(seconds % 10)\" :key=\"index\"\n                 class=\"pixel active\"></div>\n          </div>\n        </div>\n      </div>\n      \n      <!-- 毫秒显示 -->\n      <div class=\"digit-group flex items-center ml-2\">\n        <div class=\"led-digit small-digit\">\n          <div class=\"pixel-grid\">\n            <div v-for=\"(on, index) in getDigitPattern(Math.floor(milliseconds / 10))\" :key=\"index\"\n                 class=\"pixel active small-pixel\"></div>\n          </div>\n        </div>\n        <div class=\"led-digit small-digit\">\n          <div class=\"pixel-grid\">\n            <div v-for=\"(on, index) in getDigitPattern(milliseconds % 10)\" :key=\"index\"\n                 class=\"pixel active small-pixel\"></div>\n          </div>\n        </div>\n      </div>\n      \n      <!-- 扫描线效果 -->\n      <div class=\"led-scanline\"></div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted, computed } from 'vue';\n\nconst props = defineProps({\n  label: {\n    type: String,\n    default: '活动倒计时'\n  },\n  totalDuration: {\n    type: Number,\n    default: 60000\n  },\n  labels: {\n    type: Object,\n    default: () => ({\n      minute: '分',\n      second: '秒',\n      millisecond: '毫秒'\n    })\n  }\n});\n\n// 倒计时状态\nconst timeLeft = ref(props.totalDuration);\nconst showColon = ref(true);\nlet startTime, timer;\n\n// 计算属性 - 解析时间\nconst minutes = computed(() => Math.floor((timeLeft.value / 1000) / 60));\nconst seconds = computed(() => Math.floor((timeLeft.value / 1000) % 60));\nconst milliseconds = computed(() => Math.floor((timeLeft.value % 1000) / 10));\n\n// 数字0-9的点阵定义\nconst digitPatterns = {\n  0: [1,1,1,1,1,1,0,1,1,1,1,1,1],\n  1: [0,1,1,0,0,0,0,1,1,0,0,0,0],\n  2: [1,1,0,1,1,0,1,1,0,1,1,1,1],\n  3: [1,1,1,1,0,0,1,1,1,1,0,0,1],\n  4: [1,0,1,0,0,1,1,1,1,0,0,1,0],\n  5: [1,0,1,1,0,1,1,0,1,1,0,1,1],\n  6: [1,1,1,1,0,1,1,0,1,1,1,1,1],\n  7: [1,0,0,0,0,0,1,1,1,0,0,0,0],\n  8: [1,1,1,1,0,1,1,1,1,1,1,1,1],\n  9: [1,0,1,1,0,1,1,1,1,1,0,1,1]\n};\n\n// 获取数字的点阵模式\nconst getDigitPattern = (number) => {\n  return digitPatterns[number] || digitPatterns[0];\n};\n\n// 更新倒计时\nconst updateCountdown = () => {\n  const now = Date.now();\n  const elapsed = now - startTime;\n  timeLeft.value = Math.max(props.totalDuration - elapsed, 0);\n  \n  // 冒号闪烁效果\n  showColon.value = Math.floor((Date.now() / 500)) % 2 === 0;\n  \n  // 倒计时结束\n  if (timeLeft.value <= 0) {\n    clearInterval(timer);\n  }\n};\n\n// 生命周期钩子\nonMounted(() => {\n  startTime = Date.now();\n  timer = setInterval(updateCountdown, 10); // 每10ms更新一次，以显示毫秒\n});\n\nonUnmounted(() => {\n  if (timer) {\n    clearInterval(timer);\n  }\n});\n</script>\n\n<style scoped>\n/* LED容器样式 */\n.led-countdown-container {\n  font-family: 'Courier New', monospace;\n  position: relative;\n}\n\n/* LED显示面板 */\n.led-display {\n  background-color: #000000;\n  position: relative;\n  box-shadow: 0 0 30px rgba(255, 204, 0, 0.3);\n}\n\n/* LED数字 */\n.led-digit {\n  width: 35px;\n  height: 55px;\n  background-color: #000000;\n  margin: 0 2px;\n  position: relative;\n}\n\n/* 小尺寸数字 */\n.small-digit {\n  width: 25px;\n  height: 40px;\n}\n\n/* 像素网格 */\n.pixel-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  grid-template-rows: repeat(5, 1fr);\n  width: 100%;\n  height: 100%;\n  gap: 2px;\n  padding: 4px;\n}\n\n/* 像素点 */\n.pixel {\n  background-color: #111111;\n  border-radius: 2px;\n  transition: all 0.1s ease;\n}\n\n/* 激活的像素点 */\n.pixel.active {\n  background-color: #ffcc00;\n  box-shadow: 0 0 4px rgba(255, 204, 0, 0.8);\n}\n\n/* 小尺寸像素点 */\n.small-pixel {\n  border-radius: 1px;\n}\n\n/* 冒号分隔符 */\n.colon-separator {\n  height: 55px;\n  margin: 0 4px;\n}\n\n/* 冒号像素点 */\n.colon-pixel {\n  width: 8px;\n  height: 8px;\n  background-color: #111111;\n  border-radius: 50%;\n  transition: all 0.1s ease;\n}\n\n/* 激活的冒号像素点 */\n.colon-pixel.active {\n  background-color: #ffcc00;\n  box-shadow: 0 0 4px rgba(255, 204, 0, 0.8);\n}\n\n/* 冒号中间间隙 */\n.pixel-gap {\n  height: 8px;\n}\n\n/* 扫描线效果 */\n.led-scanline {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 2px;\n  background: linear-gradient(\n    90deg,\n    rgba(255, 204, 0, 0) 0%,\n    rgba(255, 204, 0, 0.5) 50%,\n    rgba(255, 204, 0, 0) 100%\n  );\n  animation: scanline 3s linear infinite;\n  pointer-events: none;\n}\n\n/* 扫描线动画 */\n@keyframes scanline {\n  0% { top: 0; }\n  100% { top: 100%; }\n}\n\n/* 脉冲动画 */\n.led-title {\n  animation: pulse 2s infinite ease-in-out;\n}\n\n@keyframes pulse {\n  0% { opacity: 0.8; transform: scale(0.98); }\n  50% { opacity: 1; transform: scale(1.02); }\n  100% { opacity: 0.8; transform: scale(0.98); }\n}\n\n/* 响应式设计 */\n@media (max-width: 640px) {\n  .led-digit {\n    width: 28px;\n    height: 45px;\n  }\n  \n  .small-digit {\n    width: 20px;\n    height: 32px;\n  }\n  \n  .pixel-grid {\n    gap: 1px;\n    padding: 3px;\n  }\n  \n  .colon-pixel {\n    width: 6px;\n    height: 6px;\n  }\n  \n  .led-title {\n    font-size: 1rem;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}