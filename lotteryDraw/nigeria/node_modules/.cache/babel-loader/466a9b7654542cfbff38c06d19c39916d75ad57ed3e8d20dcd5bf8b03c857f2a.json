{"ast":null,"code":"import { ref, onMounted, onUnmounted, computed } from 'vue';\n\n// Props\n\nexport default {\n  __name: 'CircularCountdown',\n  props: {\n    config: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const props = __props;\n\n    // 合并配置\n    const countdown = {\n      ...{\n        label: '限时优惠倒计时',\n        totalDuration: 60000,\n        labels: {\n          minute: '分',\n          second: '秒',\n          millisecond: '毫秒'\n        }\n      },\n      ...props.config\n    };\n\n    // 倒计时状态\n    const remainingTime = ref(countdown.totalDuration);\n    const minutes = ref('00');\n    const seconds = ref('00');\n    const milliseconds = ref('000');\n    const progress = ref(100);\n    let intervalId = null;\n\n    // 动画状态\n    const minuteChanged = ref(false);\n    const secondChanged = ref(false);\n    const millisecondChanged = ref(false);\n\n    // 计算时间状态\n    const isLowTime = computed(() => remainingTime.value <= 20000 && remainingTime.value > 0);\n    const isVeryLowTime = computed(() => remainingTime.value <= 10000 && remainingTime.value > 0);\n\n    // 格式化时间\n    const formatTime = () => {\n      const ms = remainingTime.value;\n      const oldMinutes = minutes.value;\n      const oldSeconds = seconds.value;\n      const oldMilliseconds = milliseconds.value;\n\n      // 计算各时间单位\n      const mins = Math.floor(ms / 60000);\n      const secs = Math.floor(ms % 60000 / 1000);\n      const msds = Math.floor(ms % 1000);\n\n      // 格式化显示\n      minutes.value = mins.toString().padStart(2, '0');\n      seconds.value = secs.toString().padStart(2, '0');\n      milliseconds.value = msds.toString().padStart(3, '0').slice(0, 2); // 简化显示\n\n      // 更新进度条\n      progress.value = ms / countdown.totalDuration * 100;\n\n      // 检测变化并触发动画\n      if (oldMinutes !== minutes.value) {\n        minuteChanged.value = true;\n        setTimeout(() => minuteChanged.value = false, 500);\n      }\n      if (oldSeconds !== seconds.value) {\n        secondChanged.value = true;\n        setTimeout(() => secondChanged.value = false, 500);\n      }\n      if (oldMilliseconds !== milliseconds.value) {\n        millisecondChanged.value = true;\n        setTimeout(() => millisecondChanged.value = false, 500);\n      }\n    };\n\n    // 开始倒计时\n    const startCountdown = () => {\n      if (intervalId) clearInterval(intervalId);\n      intervalId = setInterval(() => {\n        remainingTime.value -= 10;\n        if (remainingTime.value <= 0) {\n          remainingTime.value = 0;\n          clearInterval(intervalId);\n        }\n        formatTime();\n      }, 10);\n    };\n\n    // 生命周期\n    onMounted(() => {\n      formatTime();\n      startCountdown();\n    });\n    onUnmounted(() => {\n      if (intervalId) clearInterval(intervalId);\n    });\n    const __returned__ = {\n      props,\n      countdown,\n      remainingTime,\n      minutes,\n      seconds,\n      milliseconds,\n      progress,\n      get intervalId() {\n        return intervalId;\n      },\n      set intervalId(v) {\n        intervalId = v;\n      },\n      minuteChanged,\n      secondChanged,\n      millisecondChanged,\n      isLowTime,\n      isVeryLowTime,\n      formatTime,\n      startCountdown,\n      ref,\n      onMounted,\n      onUnmounted,\n      computed\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","onUnmounted","computed","props","__props","countdown","label","totalDuration","labels","minute","second","millisecond","config","remainingTime","minutes","seconds","milliseconds","progress","intervalId","minuteChanged","secondChanged","millisecondChanged","isLowTime","value","isVeryLowTime","formatTime","ms","oldMinutes","oldSeconds","oldMilliseconds","mins","Math","floor","secs","msds","toString","padStart","slice","setTimeout","startCountdown","clearInterval","setInterval"],"sources":["/Users/ajun/projects/github/landing-page/lotteryDraw/nigeria/src/components/countdown/CircularCountdown.vue"],"sourcesContent":["<template>\n  <div \n    class=\"countdown-container relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-900 via-blue-800 to-indigo-900 p-5 shadow-2xl transition-all duration-700 md:p-7 border border-blue-700/50\"\n    :class=\"{ \n      'animate-pulse': isLowTime,\n      'from-red-800 via-red-700 to-rose-900': isVeryLowTime \n    }\"\n  >\n    <!-- 装饰光晕效果 -->\n    <div class=\"absolute -top-20 -right-20 h-60 w-60 rounded-full bg-yellow-500/10 blur-3xl transition-all duration-1000 animate-pulse\"></div>\n    <div class=\"absolute -bottom-20 -left-20 h-60 w-60 rounded-full bg-blue-500/10 blur-3xl transition-all duration-1000 animate-pulse\"></div>\n    \n    <!-- 网格纹理背景 -->\n    <div class=\"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0zNiAxOGMzLjMxNCAwIDYtMi42ODYgNi02cy0yLjY4Ni02LTYtNi02IDIuNjg2LTYgNiAyLjY4NiA2IDYgNnptMCAyYzIuMjEgMCA0LTEuNzkgNC00cy0xLjc5LTQtNC00LTQgMS43OS00IDQgMS43OSA0IDQgNHoiIHN0cm9rZT0icmdiYSgyNTUsMjE1LDUwLDAuMDgpIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNMTggMzZjMy4zMTQgMCA2LTIuNjg2IDYtNnMtMi42ODYtNi02LTYtNiAyLjY4Ni02IDYgMi42ODYgNiA2IDZ6bTAgMmMyLjIxIDAgNC0xLjc5IDQtNHMtMS43OS00LTQtNC00IDEuNzktNCA0IDEuNzkgNCA0IDR6IiBzdHJva2U9InJnYmEoMjU1LDIxNSw1MCwwLjA4KSIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9nPjwvc3ZnPg==')] opacity-20 pointer-events-none\"></div>\n\n    <!-- 标题 - 商业风格 -->\n    <h2 \n      class=\"mb-5 text-center text-xl font-bold bg-gradient-to-r from-amber-300 to-yellow-100 bg-clip-text text-transparent drop-shadow-lg transition-all duration-500 md:text-2xl\"\n      :class=\"{ \n        'from-amber-200 to-yellow-300 scale-105': isLowTime,\n        'from-yellow-200 to-amber-300 scale-110': isVeryLowTime \n      }\"\n    >\n      {{ countdown.label }}\n      <span v-if=\"isVeryLowTime\" class=\"inline-block ml-2 animate-bounce\">⏱️</span>\n    </h2>\n    \n    <!-- 倒计时显示 -->\n    <div class=\"flex flex-col items-center justify-center gap-5\">\n      <!-- 时间数字显示 -->\n      <div class=\"flex flex-wrap items-center justify-center gap-2 md:gap-4\">\n        <!-- 分钟 -->\n        <div class=\"time-box group relative\">\n          <div \n            class=\"time-digit h-20 w-16 overflow-hidden rounded-lg bg-white/5 backdrop-blur-md px-2 text-3xl font-bold text-white shadow-lg transition-all duration-300 border border-white/10 md:h-24 md:w-20 md:text-5xl\"\n            :class=\"{ \n              'bg-red-900/30 border-red-500/30': isLowTime,\n              'bg-red-800/40 border-red-500/40 transform scale-105': isVeryLowTime\n            }\"\n          >\n            <span :class=\"{ 'slide-down': minuteChanged }\" class=\"flex h-full w-full items-center justify-center\">\n              {{ minutes }}\n            </span>\n          </div>\n          <span class=\"absolute -bottom-5 left-1/2 -translate-x-1/2 whitespace-nowrap rounded-full bg-black/20 px-2 py-1 text-xs font-medium text-amber-200 transition-all duration-300 backdrop-blur-sm group-hover:bg-black/30\">\n            {{ countdown.labels.minute }}\n          </span>\n        </div>\n        \n        <!-- 时间分隔符 -->\n        <div class=\"time-separator hidden items-center text-3xl font-bold text-amber-300/70 md:flex\">\n          <div class=\"h-4 w-4 rounded-full bg-amber-300/70 mx-1 animate-blink\"></div>\n          <div class=\"h-4 w-4 rounded-full bg-amber-300/70 mx-1 animate-blink\" style=\"animation-delay: 0.5s\"></div>\n        </div>\n        \n        <!-- 秒钟 -->\n        <div class=\"time-box group relative\">\n          <div \n            class=\"time-digit h-20 w-16 overflow-hidden rounded-lg bg-white/5 backdrop-blur-md px-2 text-3xl font-bold text-white shadow-lg transition-all duration-300 border border-white/10 md:h-24 md:w-20 md:text-5xl\"\n            :class=\"{ \n              'bg-red-900/30 border-red-500/30': isLowTime,\n              'bg-red-800/40 border-red-500/40 transform scale-105': isVeryLowTime\n            }\"\n          >\n            <span :class=\"{ 'slide-down': secondChanged }\" class=\"flex h-full w-full items-center justify-center\">\n              {{ seconds }}\n            </span>\n          </div>\n          <span class=\"absolute -bottom-5 left-1/2 -translate-x-1/2 whitespace-nowrap rounded-full bg-black/20 px-2 py-1 text-xs font-medium text-amber-200 transition-all duration-300 backdrop-blur-sm group-hover:bg-black/30\">\n            {{ countdown.labels.second }}\n          </span>\n        </div>\n        \n        <!-- 毫秒（高级版简化显示） -->\n        <div v-if=\"config.showMilliseconds !== false\" class=\"time-box group relative hidden sm:block\">\n          <div \n            class=\"time-digit h-16 w-12 overflow-hidden rounded-lg bg-white/5 backdrop-blur-md px-1 text-xl font-bold text-white shadow-lg transition-all duration-300 border border-white/10 md:h-20 md:w-16 md:text-3xl\"\n            :class=\"{ \n              'bg-red-900/30 border-red-500/30': isLowTime,\n              'bg-red-800/40 border-red-500/40 transform scale-105': isVeryLowTime\n            }\"\n          >\n            <span :class=\"{ 'slide-down': millisecondChanged }\" class=\"flex h-full w-full items-center justify-center\">\n              {{ milliseconds }}\n            </span>\n          </div>\n          <span class=\"absolute -bottom-5 left-1/2 -translate-x-1/2 whitespace-nowrap rounded-full bg-black/20 px-2 py-1 text-xs font-medium text-amber-200 transition-all duration-300 backdrop-blur-sm group-hover:bg-black/30\">\n            {{ countdown.labels.millisecond }}\n          </span>\n        </div>\n      </div>\n      \n      <!-- 移动端时间标签 -->\n      <div class=\"flex items-center justify-center gap-6 text-sm font-medium text-amber-200/70 md:hidden\">\n        <span>{{ countdown.labels.minute }}</span>\n        <span>{{ countdown.labels.second }}</span>\n        <span v-if=\"config.showMilliseconds !== false\">{{ countdown.labels.millisecond }}</span>\n      </div>\n      \n      <!-- 进度条 - 商业风格 -->\n      <div class=\"mt-3 h-1.5 w-full max-w-md rounded-full bg-black/30 overflow-hidden shadow-inner border border-white/10\">\n        <div \n          :style=\"{ width: progress + '%' }\"\n          class=\"h-full transition-all duration-100 ease-linear\"\n          :class=\"{\n            'bg-gradient-to-r from-emerald-400 to-green-500': progress > 60,\n            'bg-gradient-to-r from-amber-400 to-yellow-500': progress <= 60 && progress > 30,\n            'bg-gradient-to-r from-orange-400 to-red-500': progress <= 30 && progress > 10,\n            'bg-gradient-to-r from-red-500 to-rose-500 animate-pulse': progress <= 10\n          }\"\n        ></div>\n      </div>\n      \n      <!-- 倒计时结束提示 -->\n      <div v-if=\"remainingTime <= 0\" class=\"mt-3 text-center\">\n        <p class=\"text-xl font-bold bg-gradient-to-r from-amber-300 to-yellow-200 bg-clip-text text-transparent drop-shadow-lg animate-bounce\">\n          {{ countdown.completeText || '活动开始！' }}\n        </p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted, computed } from 'vue';\n\n// Props\nconst props = defineProps({\n  config: {\n    type: Object,\n    default: () => ({})\n  }\n});\n\n// 合并配置\nconst countdown = {\n  ...{\n    label: '限时优惠倒计时',\n    totalDuration: 60000,\n    labels: {\n      minute: '分',\n      second: '秒',\n      millisecond: '毫秒'\n    }\n  },\n  ...props.config\n};\n\n// 倒计时状态\nconst remainingTime = ref(countdown.totalDuration);\nconst minutes = ref('00');\nconst seconds = ref('00');\nconst milliseconds = ref('000');\nconst progress = ref(100);\nlet intervalId = null;\n\n// 动画状态\nconst minuteChanged = ref(false);\nconst secondChanged = ref(false);\nconst millisecondChanged = ref(false);\n\n// 计算时间状态\nconst isLowTime = computed(() => remainingTime.value <= 20000 && remainingTime.value > 0);\nconst isVeryLowTime = computed(() => remainingTime.value <= 10000 && remainingTime.value > 0);\n\n// 格式化时间\nconst formatTime = () => {\n  const ms = remainingTime.value;\n  const oldMinutes = minutes.value;\n  const oldSeconds = seconds.value;\n  const oldMilliseconds = milliseconds.value;\n  \n  // 计算各时间单位\n  const mins = Math.floor(ms / 60000);\n  const secs = Math.floor((ms % 60000) / 1000);\n  const msds = Math.floor((ms % 1000));\n  \n  // 格式化显示\n  minutes.value = mins.toString().padStart(2, '0');\n  seconds.value = secs.toString().padStart(2, '0');\n  milliseconds.value = msds.toString().padStart(3, '0').slice(0, 2); // 简化显示\n  \n  // 更新进度条\n  progress.value = (ms / countdown.totalDuration) * 100;\n  \n  // 检测变化并触发动画\n  if (oldMinutes !== minutes.value) {\n    minuteChanged.value = true;\n    setTimeout(() => minuteChanged.value = false, 500);\n  }\n  if (oldSeconds !== seconds.value) {\n    secondChanged.value = true;\n    setTimeout(() => secondChanged.value = false, 500);\n  }\n  if (oldMilliseconds !== milliseconds.value) {\n    millisecondChanged.value = true;\n    setTimeout(() => millisecondChanged.value = false, 500);\n  }\n};\n\n// 开始倒计时\nconst startCountdown = () => {\n  if (intervalId) clearInterval(intervalId);\n  \n  intervalId = setInterval(() => {\n    remainingTime.value -= 10;\n    \n    if (remainingTime.value <= 0) {\n      remainingTime.value = 0;\n      clearInterval(intervalId);\n    }\n    \n    formatTime();\n  }, 10);\n};\n\n// 生命周期\nonMounted(() => {\n  formatTime();\n  startCountdown();\n});\n\nonUnmounted(() => {\n  if (intervalId) clearInterval(intervalId);\n});\n</script>\n\n<style scoped>\n/* 数字变化动画 */\n.slide-down {\n  animation: slide-down 0.5s ease-out forwards;\n}\n\n@keyframes slide-down {\n  0% { transform: translateY(-100%); opacity: 0; }\n  50% { transform: translateY(0); opacity: 1; }\n}\n\n/* 分隔符闪烁动画 */\n.animate-blink {\n  animation: blink 1s step-end infinite;\n}\n\n@keyframes blink {\n  from, to { opacity: 1; }\n  50% { opacity: 0.3; }\n}\n\n/* 悬停效果 */\n.time-box:hover .time-digit {\n  transform: scale(1.05);\n  box-shadow: 0 0 20px rgba(255, 215, 0, 0.2);\n}\n\n/* 精美的发光效果 */\n.time-digit {\n  position: relative;\n  overflow: hidden;\n}\n\n.time-digit::before {\n  content: '';\n  position: absolute;\n  top: -50%;\n  left: -50%;\n  width: 200%;\n  height: 200%;\n  background: linear-gradient(\n    to bottom,\n    transparent 0%,\n    rgba(255, 215, 0, 0.1) 50%,\n    transparent 100%\n  );\n  transform: rotate(30deg);\n  animation: shine 6s infinite;\n  pointer-events: none;\n}\n\n@keyframes shine {\n  0% { transform: translateX(-100%) rotate(30deg); }\n  100% { transform: translateX(100%) rotate(30deg); }\n}\n\n/* 进度条动画增强 */\n.animate-pulse {\n  animation: pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}