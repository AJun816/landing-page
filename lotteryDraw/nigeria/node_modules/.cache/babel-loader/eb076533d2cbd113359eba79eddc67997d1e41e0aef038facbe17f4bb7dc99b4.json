{"ast":null,"code":"import { ref, onMounted, onUnmounted } from 'vue';\n\n// 定义 props - 完整匹配App.vue中传递的参数\n\nexport default {\n  __name: 'RedirectDefault',\n  props: {\n    targetUrl: {\n      type: String,\n      required: true\n    },\n    countdownSeconds: {\n      type: Number,\n      default: 3\n    },\n    message: {\n      type: String,\n      default: 'You will be redirected in:'\n    },\n    secondsLabel: {\n      type: String,\n      default: 'seconds'\n    },\n    allowSkip: {\n      type: Boolean,\n      default: true\n    },\n    skipButtonText: {\n      type: String,\n      default: 'Skip →'\n    }\n  },\n  emits: ['skip', 'auto-redirect'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    const props = __props;\n\n    // 定义事件发射器\n    const emit = __emit;\n    const secondsRemaining = ref(props.countdownSeconds);\n    let countdownTimer = null;\n\n    // 启动倒计时\n    const startCountdown = () => {\n      secondsRemaining.value = props.countdownSeconds;\n      countdownTimer = setInterval(() => {\n        secondsRemaining.value--;\n        if (secondsRemaining.value <= 0) {\n          clearInterval(countdownTimer);\n          performRedirect(); // 直接执行重定向\n        }\n      }, 1000);\n    };\n\n    // 执行重定向\n    const performRedirect = () => {\n      emit('auto-redirect');\n      if (props.targetUrl) {\n        window.location.href = props.targetUrl;\n      }\n    };\n\n    // 处理跳过倒计时\n    const handleSkip = () => {\n      emit('skip');\n      skipCountdown();\n    };\n\n    // 跳过倒计时（供父组件调用）\n    const skipCountdown = () => {\n      if (countdownTimer) {\n        clearInterval(countdownTimer);\n      }\n      performRedirect();\n    };\n    onMounted(() => {\n      startCountdown();\n    });\n    onUnmounted(() => {\n      if (countdownTimer) clearInterval(countdownTimer);\n    });\n\n    // 暴露方法给父组件\n    __expose({\n      reset: startCountdown,\n      skipCountdown: skipCountdown // 添加skipCountdown方法\n    });\n    const __returned__ = {\n      props,\n      emit,\n      secondsRemaining,\n      get countdownTimer() {\n        return countdownTimer;\n      },\n      set countdownTimer(v) {\n        countdownTimer = v;\n      },\n      startCountdown,\n      performRedirect,\n      handleSkip,\n      skipCountdown,\n      ref,\n      onMounted,\n      onUnmounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","onUnmounted","props","__props","emit","__emit","secondsRemaining","countdownSeconds","countdownTimer","startCountdown","value","setInterval","clearInterval","performRedirect","targetUrl","window","location","href","handleSkip","skipCountdown","__expose","reset"],"sources":["/Users/ajun/projects/github/landing-page/lotteryDraw/nigeria/src/components/redirect/RedirectDefault.vue"],"sourcesContent":["<template>\n  <div class=\"redirect-notice fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-70 text-white px-6 py-3 rounded-full backdrop-blur-sm shadow-lg z-40\">\n    <p class=\"text-center text-sm md:text-base\">\n      {{ message }} {{ secondsRemaining }} {{ secondsLabel }}\n      <button\n          v-if=\"allowSkip\"\n          @click=\"handleSkip\"\n      class=\"text-yellow-300 hover:text-yellow-200 font-medium ml-2 underline\"\n      >\n      {{ skipButtonText }}\n      </button>\n    </p>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted } from 'vue';\n\n// 定义 props - 完整匹配App.vue中传递的参数\nconst props = defineProps({\n  targetUrl: {\n    type: String,\n    required: true\n  },\n  countdownSeconds: {\n    type: Number,\n    default: 3\n  },\n  message: {\n    type: String,\n    default: 'You will be redirected in:'\n  },\n  secondsLabel: {\n    type: String,\n    default: 'seconds'\n  },\n  allowSkip: {\n    type: Boolean,\n    default: true\n  },\n  skipButtonText: {\n    type: String,\n    default: 'Skip →'\n  }\n});\n\n// 定义事件发射器\nconst emit = defineEmits(['skip', 'auto-redirect']);\n\nconst secondsRemaining = ref(props.countdownSeconds);\nlet countdownTimer = null;\n\n// 启动倒计时\nconst startCountdown = () => {\n  secondsRemaining.value = props.countdownSeconds;\n\n  countdownTimer = setInterval(() => {\n    secondsRemaining.value--;\n\n    if (secondsRemaining.value <= 0) {\n      clearInterval(countdownTimer);\n      performRedirect(); // 直接执行重定向\n    }\n  }, 1000);\n};\n\n// 执行重定向\nconst performRedirect = () => {\n  emit('auto-redirect');\n  if (props.targetUrl) {\n    window.location.href = props.targetUrl;\n  }\n};\n\n// 处理跳过倒计时\nconst handleSkip = () => {\n  emit('skip');\n  skipCountdown();\n};\n\n// 跳过倒计时（供父组件调用）\nconst skipCountdown = () => {\n  if (countdownTimer) {\n    clearInterval(countdownTimer);\n  }\n  performRedirect();\n};\n\nonMounted(() => {\n  startCountdown();\n});\n\nonUnmounted(() => {\n  if (countdownTimer) clearInterval(countdownTimer);\n});\n\n// 暴露方法给父组件\ndefineExpose({\n  reset: startCountdown,\n  skipCountdown: skipCountdown // 添加skipCountdown方法\n});\n</script>\n"],"mappings":"AAgBA,SAASA,GAAG,EAAEC,SAAS,EAAEC,WAAW,QAAQ,KAAK;;AAEjD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IACA,MAAMC,KAAK,GAAGC,OAyBZ;;IAEF;IACA,MAAMC,IAAI,GAAGC,MAAsC;IAEnD,MAAMC,gBAAgB,GAAGP,GAAG,CAACG,KAAK,CAACK,gBAAgB,CAAC;IACpD,IAAIC,cAAc,GAAG,IAAI;;IAEzB;IACA,MAAMC,cAAc,GAAGA,CAAA,KAAM;MAC3BH,gBAAgB,CAACI,KAAK,GAAGR,KAAK,CAACK,gBAAgB;MAE/CC,cAAc,GAAGG,WAAW,CAAC,MAAM;QACjCL,gBAAgB,CAACI,KAAK,EAAE;QAExB,IAAIJ,gBAAgB,CAACI,KAAK,IAAI,CAAC,EAAE;UAC/BE,aAAa,CAACJ,cAAc,CAAC;UAC7BK,eAAe,CAAC,CAAC,CAAC,CAAC;QACrB;MACF,CAAC,EAAE,IAAI,CAAC;IACV,CAAC;;IAED;IACA,MAAMA,eAAe,GAAGA,CAAA,KAAM;MAC5BT,IAAI,CAAC,eAAe,CAAC;MACrB,IAAIF,KAAK,CAACY,SAAS,EAAE;QACnBC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAGf,KAAK,CAACY,SAAS;MACxC;IACF,CAAC;;IAED;IACA,MAAMI,UAAU,GAAGA,CAAA,KAAM;MACvBd,IAAI,CAAC,MAAM,CAAC;MACZe,aAAa,CAAC,CAAC;IACjB,CAAC;;IAED;IACA,MAAMA,aAAa,GAAGA,CAAA,KAAM;MAC1B,IAAIX,cAAc,EAAE;QAClBI,aAAa,CAACJ,cAAc,CAAC;MAC/B;MACAK,eAAe,CAAC,CAAC;IACnB,CAAC;IAEDb,SAAS,CAAC,MAAM;MACdS,cAAc,CAAC,CAAC;IAClB,CAAC,CAAC;IAEFR,WAAW,CAAC,MAAM;MAChB,IAAIO,cAAc,EAAEI,aAAa,CAACJ,cAAc,CAAC;IACnD,CAAC,CAAC;;IAEF;IACAY,QAAY,CAAC;MACXC,KAAK,EAAEZ,cAAc;MACrBU,aAAa,EAAEA,aAAa,CAAC;IAC/B,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}