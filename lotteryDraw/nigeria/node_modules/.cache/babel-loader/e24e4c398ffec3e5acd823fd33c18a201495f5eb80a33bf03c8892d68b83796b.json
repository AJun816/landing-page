{"ast":null,"code":"import { ref, reactive, onMounted, onUnmounted, computed } from 'vue';\nconst size = 240; // 圆形大小\n\nexport default {\n  __name: 'CircularCountdown',\n  props: {\n    config: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const props = __props;\n    const canvas = ref(null);\n    const timeLeft = reactive({\n      minutes: \"00\",\n      seconds: \"00\",\n      milliseconds: \"000\"\n    });\n    let timer = null;\n    let startTime = null;\n    let remaining = props.config.totalDuration;\n\n    // 数字样式：科技感闪烁\n    const digitClass = computed(() => \"bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-500 \" + \"bg-clip-text text-transparent animate-pulse drop-shadow-lg\");\n    function formatTime(ms) {\n      const totalSeconds = Math.floor(ms / 1000);\n      const minutes = Math.floor(totalSeconds / 60);\n      const seconds = totalSeconds % 60;\n      const milliseconds = Math.floor(ms % 1000 / 10);\n      return {\n        minutes: String(minutes).padStart(2, '0'),\n        seconds: String(seconds).padStart(2, '0'),\n        milliseconds: String(milliseconds).padStart(2, '0')\n      };\n    }\n    function drawCircle(ctx, percent) {\n      ctx.clearRect(0, 0, size, size);\n      const center = size / 2;\n      const radius = size / 2 - 15;\n      const startAngle = -Math.PI / 2;\n      const endAngle = startAngle + percent * 2 * Math.PI;\n\n      // 背景环\n      ctx.beginPath();\n      ctx.arc(center, center, radius, 0, Math.PI * 2);\n      ctx.strokeStyle = \"rgba(255,255,255,0.1)\";\n      ctx.lineWidth = 15;\n      ctx.stroke();\n\n      // 动态渐变环\n      const gradient = ctx.createLinearGradient(0, 0, size, size);\n      gradient.addColorStop(0, \"#06b6d4\");\n      gradient.addColorStop(0.5, \"#3b82f6\");\n      gradient.addColorStop(1, \"#a855f7\");\n      ctx.beginPath();\n      ctx.arc(center, center, radius, startAngle, endAngle);\n      ctx.strokeStyle = gradient;\n      ctx.lineWidth = 15;\n      ctx.shadowBlur = 20;\n      ctx.shadowColor = \"#3b82f6\";\n      ctx.lineCap = \"round\";\n      ctx.stroke();\n    }\n    function update() {\n      const now = Date.now();\n      const elapsed = now - startTime;\n      const msLeft = Math.max(remaining - elapsed, 0);\n      Object.assign(timeLeft, formatTime(msLeft));\n      const percent = msLeft / props.config.totalDuration;\n      const ctx = canvas.value.getContext(\"2d\");\n      drawCircle(ctx, percent);\n      if (msLeft <= 0) {\n        clearInterval(timer);\n      }\n    }\n    onMounted(() => {\n      startTime = Date.now();\n      timer = setInterval(update, 30);\n    });\n    onUnmounted(() => {\n      clearInterval(timer);\n    });\n    const __returned__ = {\n      props,\n      canvas,\n      size,\n      timeLeft,\n      get timer() {\n        return timer;\n      },\n      set timer(v) {\n        timer = v;\n      },\n      get startTime() {\n        return startTime;\n      },\n      set startTime(v) {\n        startTime = v;\n      },\n      get remaining() {\n        return remaining;\n      },\n      set remaining(v) {\n        remaining = v;\n      },\n      digitClass,\n      formatTime,\n      drawCircle,\n      update,\n      ref,\n      reactive,\n      onMounted,\n      onUnmounted,\n      computed\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","reactive","onMounted","onUnmounted","computed","size","props","__props","canvas","timeLeft","minutes","seconds","milliseconds","timer","startTime","remaining","config","totalDuration","digitClass","formatTime","ms","totalSeconds","Math","floor","String","padStart","drawCircle","ctx","percent","clearRect","center","radius","startAngle","PI","endAngle","beginPath","arc","strokeStyle","lineWidth","stroke","gradient","createLinearGradient","addColorStop","shadowBlur","shadowColor","lineCap","update","now","Date","elapsed","msLeft","max","Object","assign","value","getContext","clearInterval","setInterval"],"sources":["/Users/ajun/projects/github/landing-page/lotteryDraw/nigeria/src/components/countdown/CircularCountdown.vue"],"sourcesContent":["<template>\n  <div class=\"flex flex-col items-center justify-center text-center relative\">\n    <!-- 倒计时标题 -->\n    <h2 \n      class=\"text-xl font-bold tracking-widest animate-pulse text-transparent bg-clip-text \n             bg-gradient-to-r from-pink-500 via-yellow-400 to-red-600 drop-shadow-lg\">\n      {{ config.label }}\n    </h2>\n\n    <!-- 圆形倒计时容器 -->\n    <div class=\"relative mt-6\">\n      <!-- Canvas 环形倒计时 -->\n      <canvas ref=\"canvas\" :width=\"size\" :height=\"size\" class=\"drop-shadow-2xl\"></canvas>\n\n      <!-- 数字显示 -->\n      <div \n        class=\"absolute inset-0 flex flex-col items-center justify-center \n               text-white font-extrabold space-y-1\">\n        <div class=\"flex space-x-2 text-4xl sm:text-5xl md:text-6xl tracking-wider\">\n          <span :class=\"digitClass\">{{ timeLeft.minutes }}</span>\n          <span class=\"text-lg sm:text-xl md:text-2xl mt-2\">{{ config.labels.minute }}</span>\n          <span :class=\"digitClass\">{{ timeLeft.seconds }}</span>\n          <span class=\"text-lg sm:text-xl md:text-2xl mt-2\">{{ config.labels.second }}</span>\n        </div>\n        <div class=\"flex space-x-1 text-base sm:text-lg tracking-wide opacity-70\">\n          <span :class=\"digitClass\">{{ timeLeft.milliseconds }}</span>\n          <span>{{ config.labels.millisecond }}</span>\n        </div>\n      </div>\n    </div>\n\n    <!-- 光晕科技装饰 -->\n    <div class=\"absolute w-[300px] h-[300px] rounded-full \n                bg-gradient-to-r from-cyan-500/20 to-purple-600/20 \n                blur-3xl animate-ping\"></div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted, onUnmounted, computed } from 'vue'\n\nconst props = defineProps({\n  config: {\n    type: Object,\n    required: true\n  }\n})\n\nconst canvas = ref(null)\nconst size = 240 // 圆形大小\n\nconst timeLeft = reactive({\n  minutes: \"00\",\n  seconds: \"00\",\n  milliseconds: \"000\"\n})\n\nlet timer = null\nlet startTime = null\nlet remaining = props.config.totalDuration\n\n// 数字样式：科技感闪烁\nconst digitClass = computed(() => \n  \"bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-500 \" +\n  \"bg-clip-text text-transparent animate-pulse drop-shadow-lg\"\n)\n\nfunction formatTime(ms) {\n  const totalSeconds = Math.floor(ms / 1000)\n  const minutes = Math.floor(totalSeconds / 60)\n  const seconds = totalSeconds % 60\n  const milliseconds = Math.floor((ms % 1000) / 10)\n\n  return {\n    minutes: String(minutes).padStart(2, '0'),\n    seconds: String(seconds).padStart(2, '0'),\n    milliseconds: String(milliseconds).padStart(2, '0')\n  }\n}\n\nfunction drawCircle(ctx, percent) {\n  ctx.clearRect(0, 0, size, size)\n  const center = size / 2\n  const radius = size / 2 - 15\n  const startAngle = -Math.PI / 2\n  const endAngle = startAngle + percent * 2 * Math.PI\n\n  // 背景环\n  ctx.beginPath()\n  ctx.arc(center, center, radius, 0, Math.PI * 2)\n  ctx.strokeStyle = \"rgba(255,255,255,0.1)\"\n  ctx.lineWidth = 15\n  ctx.stroke()\n\n  // 动态渐变环\n  const gradient = ctx.createLinearGradient(0, 0, size, size)\n  gradient.addColorStop(0, \"#06b6d4\")\n  gradient.addColorStop(0.5, \"#3b82f6\")\n  gradient.addColorStop(1, \"#a855f7\")\n\n  ctx.beginPath()\n  ctx.arc(center, center, radius, startAngle, endAngle)\n  ctx.strokeStyle = gradient\n  ctx.lineWidth = 15\n  ctx.shadowBlur = 20\n  ctx.shadowColor = \"#3b82f6\"\n  ctx.lineCap = \"round\"\n  ctx.stroke()\n}\n\nfunction update() {\n  const now = Date.now()\n  const elapsed = now - startTime\n  const msLeft = Math.max(remaining - elapsed, 0)\n\n  Object.assign(timeLeft, formatTime(msLeft))\n\n  const percent = msLeft / props.config.totalDuration\n  const ctx = canvas.value.getContext(\"2d\")\n  drawCircle(ctx, percent)\n\n  if (msLeft <= 0) {\n    clearInterval(timer)\n  }\n}\n\nonMounted(() => {\n  startTime = Date.now()\n  timer = setInterval(update, 30)\n})\n\nonUnmounted(() => {\n  clearInterval(timer)\n})\n</script>\n\n<style scoped>\n/* 数字呼吸感 */\n@keyframes digit-glow {\n  0%, 100% { text-shadow: 0 0 8px #06b6d4, 0 0 16px #3b82f6; }\n  50% { text-shadow: 0 0 16px #3b82f6, 0 0 32px #a855f7; }\n}\n.digit-glow {\n  animation: digit-glow 1.5s infinite alternate;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}