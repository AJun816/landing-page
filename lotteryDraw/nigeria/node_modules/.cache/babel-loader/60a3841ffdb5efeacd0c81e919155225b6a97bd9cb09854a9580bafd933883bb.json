{"ast":null,"code":"import { ref, onMounted, onUnmounted } from 'vue';\n\n// 1. 定义 props\n\nexport default {\n  __name: 'RedirectDefault',\n  props: {\n    redirectSeconds: {\n      type: Number,\n      default: 3\n    }\n  },\n  emits: ['skip', 'auto-redirect'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    const props = __props;\n\n    // 2. 定义事件发射器（关键步骤）\n    const emit = __emit;\n    const secondsRemaining = ref(props.redirectSeconds);\n    let countdownTimer = null;\n\n    // 启动倒计时\n    const startCountdown = () => {\n      secondsRemaining.value = props.redirectSeconds;\n      countdownTimer = setInterval(() => {\n        secondsRemaining.value--;\n        if (secondsRemaining.value <= 0) {\n          clearInterval(countdownTimer);\n          emit('auto-redirect'); // 用 emit 替代 $emit\n        }\n      }, 1000);\n    };\n    onMounted(() => {\n      startCountdown();\n    });\n    onUnmounted(() => {\n      if (countdownTimer) clearInterval(countdownTimer);\n    });\n\n    // 暴露重置方法\n    __expose({\n      reset: startCountdown\n    });\n    const __returned__ = {\n      props,\n      emit,\n      secondsRemaining,\n      get countdownTimer() {\n        return countdownTimer;\n      },\n      set countdownTimer(v) {\n        countdownTimer = v;\n      },\n      startCountdown,\n      ref,\n      onMounted,\n      onUnmounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","onUnmounted","props","__props","emit","__emit","secondsRemaining","redirectSeconds","countdownTimer","startCountdown","value","setInterval","clearInterval","__expose","reset"],"sources":["/Users/ajun/projects/github/landing-page/lotteryDraw/nigeria/src/components/redirect/RedirectDefault.vue"],"sourcesContent":["<template>\n  <div class=\"redirect-notice fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-70 text-white px-6 py-3 rounded-full backdrop-blur-sm shadow-lg z-40\">\n    <p class=\"text-center text-sm md:text-base\">\n      You will be redirected in {{ secondsRemaining }} seconds\n      <button\n          @click=\"emit('skip')\"\n      class=\"text-yellow-300 hover:text-yellow-200 font-medium ml-2 underline\"\n      >\n      Skip →\n      </button>\n    </p>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted } from 'vue';\n\n// 1. 定义 props\nconst props = defineProps({\n  redirectSeconds: {\n    type: Number,\n    default: 3\n  }\n});\n\n// 2. 定义事件发射器（关键步骤）\nconst emit = defineEmits(['skip', 'auto-redirect']);\n\nconst secondsRemaining = ref(props.redirectSeconds);\nlet countdownTimer = null;\n\n// 启动倒计时\nconst startCountdown = () => {\n  secondsRemaining.value = props.redirectSeconds;\n\n  countdownTimer = setInterval(() => {\n    secondsRemaining.value--;\n\n    if (secondsRemaining.value <= 0) {\n      clearInterval(countdownTimer);\n      emit('auto-redirect'); // 用 emit 替代 $emit\n    }\n  }, 1000);\n};\n\nonMounted(() => {\n  startCountdown();\n});\n\nonUnmounted(() => {\n  if (countdownTimer) clearInterval(countdownTimer);\n});\n\n// 暴露重置方法\ndefineExpose({\n  reset: startCountdown\n});\n</script>\n"],"mappings":"AAeA,SAASA,GAAG,EAAEC,SAAS,EAAEC,WAAW,QAAQ,KAAK;;AAEjD;;;;;;;;;;;;;;;IACA,MAAMC,KAAK,GAAGC,OAKZ;;IAEF;IACA,MAAMC,IAAI,GAAGC,MAAsC;IAEnD,MAAMC,gBAAgB,GAAGP,GAAG,CAACG,KAAK,CAACK,eAAe,CAAC;IACnD,IAAIC,cAAc,GAAG,IAAI;;IAEzB;IACA,MAAMC,cAAc,GAAGA,CAAA,KAAM;MAC3BH,gBAAgB,CAACI,KAAK,GAAGR,KAAK,CAACK,eAAe;MAE9CC,cAAc,GAAGG,WAAW,CAAC,MAAM;QACjCL,gBAAgB,CAACI,KAAK,EAAE;QAExB,IAAIJ,gBAAgB,CAACI,KAAK,IAAI,CAAC,EAAE;UAC/BE,aAAa,CAACJ,cAAc,CAAC;UAC7BJ,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;QACzB;MACF,CAAC,EAAE,IAAI,CAAC;IACV,CAAC;IAEDJ,SAAS,CAAC,MAAM;MACdS,cAAc,CAAC,CAAC;IAClB,CAAC,CAAC;IAEFR,WAAW,CAAC,MAAM;MAChB,IAAIO,cAAc,EAAEI,aAAa,CAACJ,cAAc,CAAC;IACnD,CAAC,CAAC;;IAEF;IACAK,QAAY,CAAC;MACXC,KAAK,EAAEL;IACT,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}