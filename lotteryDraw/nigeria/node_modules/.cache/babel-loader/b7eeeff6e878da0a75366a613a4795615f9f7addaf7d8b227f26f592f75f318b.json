{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"w-full max-w-lg mx-auto rounded-xl\"\n};\nconst _hoisted_2 = {\n  class: \"relative bg-gray-900 px-6 py-4\"\n};\nconst _hoisted_3 = {\n  class: \"px-6 py-5 relative\"\n};\nconst _hoisted_4 = {\n  class: \"relative h-8 bg-gray-200 rounded-full overflow-hidden shadow-inner\"\n};\nconst _hoisted_5 = {\n  class: \"px-6 py-2 flex justify-center items-center space-x-4 md:space-x-8\"\n};\nconst _hoisted_6 = [\"onTransitionend\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createCommentVNode(\" 主容器：增加阴影/圆角，提升质感 \"), _createElementVNode(\"div\", _hoisted_1, [_createCommentVNode(\" 顶部：限时标签 + 标题（强化商业属性） \"), _createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" 标题：淡入动画，快结束时添加抖动 \"), _createElementVNode(\"h1\", {\n    class: _normalizeClass([\"text-xl font-bold text-center text-white transition-all duration-300\", {\n      'animate-shake': $setup.isLowTime\n    }])\n  }, _toDisplayString($props.config.label), 3 /* TEXT, CLASS */)]), _createCommentVNode(\" 进度条区域：流光+渐变，快结束时变红/脉冲 \"), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createCommentVNode(\" 主进度条：渐变+过渡 \"), _createElementVNode(\"div\", {\n    class: _normalizeClass([\"absolute top-0 left-0 h-full transition-all duration-150 ease-linear\", {\n      'bg-gradient-to-r from-orange-500 to-red-600': !$setup.isLowTime,\n      'bg-gradient-to-r from-red-600 to-red-500 animate-pulse': $setup.isLowTime\n    }]),\n    style: _normalizeStyle({\n      width: $setup.progress + '%'\n    })\n  }, [_createCommentVNode(\" 流光特效（提升质感） \"), _cache[0] || (_cache[0] = _createElementVNode(\"div\", {\n    class: \"absolute top-0 left-0 h-full w-1/3 bg-white/20 transform skew-x-12 animate-flow\"\n  }, null, -1 /* CACHED */))], 6 /* CLASS, STYLE */)])]), _createCommentVNode(\" 倒计时数字：大字体+变化动画，快结束时变红 \"), _createElementVNode(\"div\", _hoisted_5, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.timeKeys, (key, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      class: \"flex flex-col items-center\"\n    }, [_createCommentVNode(\" 数字：大字体+文字阴影，变化时放大 \"), _createElementVNode(\"span\", {\n      class: _normalizeClass([\"text-4xl md:text-5xl font-extrabold transition-all duration-200\", {\n        'text-gray-800': !$setup.isLowTime,\n        'text-red-600': $setup.isLowTime,\n        'animate-number-pulse': $setup.isNumberChanged[key]\n      }]),\n      onTransitionend: () => $setup.isNumberChanged[key] = false\n    }, _toDisplayString($setup.time[key]), 43 /* TEXT, CLASS, PROPS, NEED_HYDRATION */, _hoisted_6), _createCommentVNode(\" 单位：小字体+灰色，快结束时同步变红 \"), _createElementVNode(\"span\", {\n      class: _normalizeClass([\"mt-1 text-sm font-medium\", {\n        'text-gray-500': !$setup.isLowTime,\n        'text-red-500': $setup.isLowTime\n      }])\n    }, _toDisplayString($props.config.labels[key]), 3 /* TEXT, CLASS */)]);\n  }), 128 /* KEYED_FRAGMENT */))])])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createCommentVNode","_createElementVNode","_hoisted_1","_hoisted_2","_normalizeClass","$setup","isLowTime","$props","config","label","_hoisted_3","_hoisted_4","style","_normalizeStyle","width","progress","_hoisted_5","_createElementBlock","_Fragment","_renderList","timeKeys","key","index","isNumberChanged","onTransitionend","time","_hoisted_6","labels"],"sources":["/Users/ajun/projects/github/landing-page/lotteryDraw/nigeria/src/components/countdown/ProgressCountdown.vue"],"sourcesContent":["<template>\n  <!-- 主容器：增加阴影/圆角，提升质感 -->\n  <div class=\"w-full max-w-lg mx-auto  rounded-xl \">\n    <!-- 顶部：限时标签 + 标题（强化商业属性） -->\n    <div class=\"relative bg-gray-900 px-6 py-4\">\n\n      <!-- 标题：淡入动画，快结束时添加抖动 -->\n      <h1 \n        class=\"text-xl font-bold text-center text-white transition-all duration-300\"\n        :class=\"{ 'animate-shake': isLowTime }\"\n      >\n        {{ config.label }}\n      </h1>\n    </div>\n\n    <!-- 进度条区域：流光+渐变，快结束时变红/脉冲 -->\n    <div class=\"px-6 py-5 relative\">\n      <div class=\"relative h-8 bg-gray-200 rounded-full overflow-hidden shadow-inner\">\n        <!-- 主进度条：渐变+过渡 -->\n        <div \n          class=\"absolute top-0 left-0 h-full transition-all duration-150 ease-linear\"\n          :class=\"{ \n            'bg-gradient-to-r from-orange-500 to-red-600': !isLowTime, \n            'bg-gradient-to-r from-red-600 to-red-500 animate-pulse': isLowTime \n          }\"\n          :style=\"{ width: progress + '%' }\"\n        >\n          <!-- 流光特效（提升质感） -->\n          <div class=\"absolute top-0 left-0 h-full w-1/3 bg-white/20 transform skew-x-12 animate-flow\"></div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 倒计时数字：大字体+变化动画，快结束时变红 -->\n    <div class=\"px-6 py-2 flex justify-center items-center space-x-4 md:space-x-8\">\n      <div \n        v-for=\"(key, index) in timeKeys\" \n        :key=\"index\"\n        class=\"flex flex-col items-center\"\n      >\n        <!-- 数字：大字体+文字阴影，变化时放大 -->\n        <span \n          class=\"text-4xl md:text-5xl font-extrabold transition-all duration-200\"\n          :class=\"{ \n            'text-gray-800': !isLowTime, \n            'text-red-600': isLowTime,\n            'animate-number-pulse': isNumberChanged[key] \n          }\"\n          @transitionend=\"() => (isNumberChanged[key] = false)\"\n        >\n          {{ time[key] }}\n        </span>\n        <!-- 单位：小字体+灰色，快结束时同步变红 -->\n        <span \n          class=\"mt-1 text-sm font-medium\"\n          :class=\"{ 'text-gray-500': !isLowTime, 'text-red-500': isLowTime }\"\n        >\n          {{ config.labels[key] }}\n        </span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { reactive, ref, onMounted, onUnmounted, watch } from 'vue'\n\n// 定义props，完全基于传入的配置\nconst props = defineProps({\n  config: {\n    type: Object,\n    required: true,\n    validator: (value) => {\n      // 简单验证配置是否包含必要字段\n      return 'label' in value && 'totalDuration' in value && 'labels' in value\n    }\n  }\n})\n\n// 提取时间单位的键名，使组件更灵活\nconst timeKeys = Object.keys(props.config.labels)\n\n// 状态管理\nconst time = reactive(\n  // 初始化时间对象，根据配置的时间单位\n  timeKeys.reduce((acc, key) => {\n    acc[key] = key === 'millisecond' ? '000' : '00'\n    return acc\n  }, {})\n)\n\nconst progress = ref(100)\nconst timer = ref(null)\nconst isEnded = ref(false) // 倒计时是否结束\nconst isLowTime = ref(false) // 是否进入“最后1分钟”紧张期\nconst isNumberChanged = ref(\n  // 初始化数字变化标记\n  timeKeys.reduce((acc, key) => {\n    acc[key] = false\n    return acc\n  }, {})\n)\n\n// 记录上一次时间，判断是否变化（触发动画）\nconst lastTime = ref({ ...time })\n\n// 倒计时核心逻辑\nconst startCountdown = () => {\n  const endTime = Date.now() + props.config.totalDuration\n\n  timer.value = setInterval(() => {\n    const remaining = Math.max(0, endTime - Date.now())\n    const newTime = {}\n    \n    // 根据配置的时间单位计算对应的值\n    if ('minute' in time) {\n      newTime.minute = String(Math.floor(remaining / 60000)).padStart(2, '0')\n    }\n    if ('second' in time) {\n      newTime.second = String(Math.floor(remaining / 1000) % 60).padStart(2, '0')\n    }\n    if ('millisecond' in time) {\n      newTime.millisecond = String(remaining % 1000).padStart(3, '0')\n    }\n\n    // 标记变化的数字（触发动画）\n    timeKeys.forEach(key => {\n      if (newTime[key] !== lastTime.value[key]) {\n        isNumberChanged.value[key] = true\n        lastTime.value[key] = newTime[key]\n      }\n    })\n\n    // 更新时间和进度\n    Object.assign(time, newTime)\n    progress.value = (remaining / props.config.totalDuration) * 100\n\n    // 判定“紧张期”（最后1分钟）\n    isLowTime.value = remaining < 60000\n\n    // 倒计时结束：清理定时器+更新状态\n    if (remaining <= 0) {\n      clearInterval(timer.value)\n      isEnded.value = true\n    }\n  }, 10) // 10ms间隔：毫秒数更精准，提升真实感\n}\n\n// 生命周期：挂载时启动，卸载时清理\nonMounted(startCountdown)\nonUnmounted(() => clearInterval(timer.value))\n\n// 监听结束状态：结束时可添加额外逻辑\nwatch(isEnded, (ended) => {\n  if (ended) {\n    // 可扩展：结束时的提示逻辑\n    console.log(\"活动结束\")\n  }\n})\n</script>\n\n<style scoped>\n/* 自定义动画：进度条流光效果 */\n@keyframes flow {\n  0% { transform: translateX(-100%) skew-x-12; }\n  100% { transform: translateX(300%) skew-x-12; }\n}\n\n/* 自定义动画：数字变化时的放大脉冲 */\n@keyframes numberPulse {\n  0% { transform: scale(1); }\n  50% { transform: scale(1.1); }\n  100% { transform: scale(1); }\n}\n\n/* 自定义动画：快结束时标题抖动 */\n@keyframes shake {\n  0%, 100% { transform: translateX(0); }\n  25% { transform: translateX(-2px); }\n  50% { transform: translateX(2px); }\n  75% { transform: translateX(-2px); }\n}\n\n/* 动画类绑定 */\n.animate-flow {\n  animation: flow 2s infinite linear;\n}\n.animate-number-pulse {\n  animation: numberPulse 0.3s ease-in-out;\n}\n.animate-shake {\n  animation: shake 0.5s infinite;\n}\n\n/* 优化移动端适配 */\n@media (max-width: 480px) {\n  .text-4xl { font-size: 2.5rem; }\n  .text-5xl { font-size: 3rem; }\n  .space-x-8 { gap: 1rem; }\n}\n</style>\n"],"mappings":";;EAEOA,KAAK,EAAC;AAAsC;;EAE1CA,KAAK,EAAC;AAAgC;;EAYtCA,KAAK,EAAC;AAAoB;;EACxBA,KAAK,EAAC;AAAoE;;EAiB5EA,KAAK,EAAC;AAAmE;;;6DAjChFC,mBAAA,sBAAyB,EACzBC,mBAAA,CA2DM,OA3DNC,UA2DM,GA1DJF,mBAAA,0BAA6B,EAC7BC,mBAAA,CASM,OATNE,UASM,GAPJH,mBAAA,sBAAyB,EACzBC,mBAAA,CAKK;IAJHF,KAAK,EAAAK,eAAA,EAAC,sEAAsE;MAAA,iBACjDC,MAAA,CAAAC;IAAS;sBAEjCC,MAAA,CAAAC,MAAM,CAACC,KAAK,wB,GAInBT,mBAAA,2BAA8B,EAC9BC,mBAAA,CAeM,OAfNS,UAeM,GAdJT,mBAAA,CAaM,OAbNU,UAaM,GAZJX,mBAAA,gBAAmB,EACnBC,mBAAA,CAUM;IATJF,KAAK,EAAAK,eAAA,EAAC,sEAAsE;sDACLC,MAAA,CAAAC,SAAS;gEAAyED,MAAA,CAAAC;;IAIxJM,KAAK,EAAAC,eAAA;MAAAC,KAAA,EAAWT,MAAA,CAAAU,QAAQ;IAAA;MAEzBf,mBAAA,gBAAmB,E,0BACnBC,mBAAA,CAAmG;IAA9FF,KAAK,EAAC;EAAiF,2B,6BAKlGC,mBAAA,2BAA8B,EAC9BC,mBAAA,CA0BM,OA1BNe,UA0BM,I,kBAzBJC,mBAAA,CAwBMC,SAAA,QAAAC,WAAA,CAvBmBd,MAAA,CAAAe,QAAQ,GAAvBC,GAAG,EAAEC,KAAK;yBADpBL,mBAAA,CAwBM;MAtBHI,GAAG,EAAEC,KAAK;MACXvB,KAAK,EAAC;QAENC,mBAAA,uBAA0B,EAC1BC,mBAAA,CAUO;MATLF,KAAK,EAAAK,eAAA,EAAC,iEAAiE;0BAC9BC,MAAA,CAAAC,SAAS;wBAA+BD,MAAA,CAAAC,SAAS;gCAAsCD,MAAA,CAAAkB,eAAe,CAACF,GAAG;;MAKlJG,eAAa,EAAAA,CAAA,KAASnB,MAAA,CAAAkB,eAAe,CAACF,GAAG;wBAEvChB,MAAA,CAAAoB,IAAI,CAACJ,GAAG,iDAAAK,UAAA,GAEb1B,mBAAA,wBAA2B,EAC3BC,mBAAA,CAKO;MAJLF,KAAK,EAAAK,eAAA,EAAC,0BAA0B;QAAA,kBACJC,MAAA,CAAAC,SAAS;QAAA,gBAAkBD,MAAA,CAAAC;MAAS;wBAE7DC,MAAA,CAAAC,MAAM,CAACmB,MAAM,CAACN,GAAG,yB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}