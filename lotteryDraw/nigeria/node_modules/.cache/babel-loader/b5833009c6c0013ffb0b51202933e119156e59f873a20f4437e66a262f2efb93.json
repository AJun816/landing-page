{"ast":null,"code":"import { ref, onMounted, onUnmounted } from 'vue';\n\n// 修正1：将 props 从 endTime 改为 totalSeconds（总秒数）\n\nexport default {\n  __name: 'CountdownDefault',\n  props: {\n    label: {\n      type: String,\n      default: 'Hurry! Offer ends in:'\n    },\n    totalSeconds: {\n      // 接收父组件传递的总秒数\n      type: Number,\n      required: true,\n      validator: value => value >= 0 // 确保秒数为非负数\n    },\n    showDays: {\n      type: Boolean,\n      default: true\n    },\n    dayLabel: {\n      type: String,\n      default: 'Days'\n    },\n    hourLabel: {\n      type: String,\n      default: 'Hrs'\n    },\n    minuteLabel: {\n      type: String,\n      default: 'Mins'\n    },\n    secondLabel: {\n      type: String,\n      default: 'Secs'\n    }\n  },\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const props = __props;\n\n    // 倒计时状态\n    const days = ref(0);\n    const hours = ref(0);\n    const minutes = ref(0);\n    const seconds = ref(0);\n    let timer = null;\n\n    // 修正2：基于总秒数计算倒计时（替代原日期差计算）\n    const calculateCountdown = () => {\n      // 初始总秒数（首次计算时赋值）\n      if (seconds.value === 0 && timer === null) {\n        seconds.value = props.totalSeconds;\n      }\n\n      // 秒数耗尽时停止\n      if (seconds.value <= 0) {\n        days.value = 0;\n        hours.value = 0;\n        minutes.value = 0;\n        seconds.value = 0;\n        clearInterval(timer);\n        return;\n      }\n\n      // 从总秒数中拆分天/时/分/秒\n      const total = seconds.value;\n      days.value = Math.floor(total / (60 * 60 * 24));\n      const remainingAfterDays = total % (60 * 60 * 24);\n      hours.value = Math.floor(remainingAfterDays / (60 * 60));\n      const remainingAfterHours = remainingAfterDays % (60 * 60);\n      minutes.value = Math.floor(remainingAfterHours / 60);\n      seconds.value = remainingAfterHours % 60;\n\n      // 每秒递减\n      seconds.value--;\n    };\n\n    // 启动倒计时\n    onMounted(() => {\n      calculateCountdown(); // 初始化\n      timer = setInterval(calculateCountdown, 1000); // 每秒更新\n    });\n\n    // 清理定时器（防止内存泄漏）\n    onUnmounted(() => {\n      if (timer) clearInterval(timer);\n    });\n    const __returned__ = {\n      props,\n      days,\n      hours,\n      minutes,\n      seconds,\n      get timer() {\n        return timer;\n      },\n      set timer(v) {\n        timer = v;\n      },\n      calculateCountdown,\n      ref,\n      onMounted,\n      onUnmounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","onUnmounted","props","__props","days","hours","minutes","seconds","timer","calculateCountdown","value","totalSeconds","clearInterval","total","Math","floor","remainingAfterDays","remainingAfterHours","setInterval"],"sources":["/Users/ajun/projects/github/landing-page/lotteryDraw/nigeria/src/components/countdown/CountdownDefault.vue"],"sourcesContent":["<template>\n  <div class=\"countdown-container bg-white/10 backdrop-blur-sm rounded-xl p-4 md:p-6 shadow-lg mb-8\">\n    <p class=\"text-white text-center mb-4 text-lg md:text-xl font-medium\">\n      {{ label }}\n    </p>\n\n    <div class=\"flex justify-center gap-2 md:gap-4\">\n      <!-- 天 -->\n      <div v-if=\"showDays\" class=\"countdown-item\">\n        <div class=\"countdown-number bg-red-600 text-white text-2xl md:text-4xl font-bold rounded-lg w-12 h-16 md:w-16 md:h-20 flex items-center justify-center shadow-md\">\n          {{ days.toString().padStart(2, '0') }}\n        </div>\n        <div class=\"countdown-label text-white text-xs md:text-sm text-center mt-1\">{{ dayLabel }}</div>\n      </div>\n\n      <!-- 时 -->\n      <div class=\"countdown-item\">\n        <div class=\"countdown-number bg-red-600 text-white text-2xl md:text-4xl font-bold rounded-lg w-12 h-16 md:w-16 md:h-20 flex items-center justify-center shadow-md\">\n          {{ hours.toString().padStart(2, '0') }}\n        </div>\n        <div class=\"countdown-label text-white text-xs md:text-sm text-center mt-1\">{{ hourLabel }}</div>\n      </div>\n\n      <!-- 分 -->\n      <div class=\"countdown-item\">\n        <div class=\"countdown-number bg-red-600 text-white text-2xl md:text-4xl font-bold rounded-lg w-12 h-16 md:w-16 md:h-20 flex items-center justify-center shadow-md\">\n          {{ minutes.toString().padStart(2, '0') }}\n        </div>\n        <div class=\"countdown-label text-white text-xs md:text-sm text-center mt-1\">{{ minuteLabel }}</div>\n      </div>\n\n      <!-- 秒 -->\n      <div class=\"countdown-item\">\n        <div class=\"countdown-number bg-red-600 text-white text-2xl md:text-4xl font-bold rounded-lg w-12 h-16 md:w-16 md:h-20 flex items-center justify-center shadow-md\">\n          {{ seconds.toString().padStart(2, '0') }}\n        </div>\n        <div class=\"countdown-label text-white text-xs md:text-sm text-center mt-1\">{{ secondLabel }}</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted } from 'vue';\n\n// 修正1：将 props 从 endTime 改为 totalSeconds（总秒数）\nconst props = defineProps({\n  label: {\n    type: String,\n    default: 'Hurry! Offer ends in:'\n  },\n  totalSeconds: {  // 接收父组件传递的总秒数\n    type: Number,\n    required: true,\n    validator: (value) => value >= 0  // 确保秒数为非负数\n  },\n  showDays: {\n    type: Boolean,\n    default: true\n  },\n  dayLabel: {\n    type: String,\n    default: 'Days'\n  },\n  hourLabel: {\n    type: String,\n    default: 'Hrs'\n  },\n  minuteLabel: {\n    type: String,\n    default: 'Mins'\n  },\n  secondLabel: {\n    type: String,\n    default: 'Secs'\n  }\n});\n\n// 倒计时状态\nconst days = ref(0);\nconst hours = ref(0);\nconst minutes = ref(0);\nconst seconds = ref(0);\nlet timer = null;\n\n// 修正2：基于总秒数计算倒计时（替代原日期差计算）\nconst calculateCountdown = () => {\n  // 初始总秒数（首次计算时赋值）\n  if (seconds.value === 0 && timer === null) {\n    seconds.value = props.totalSeconds;\n  }\n\n  // 秒数耗尽时停止\n  if (seconds.value <= 0) {\n    days.value = 0;\n    hours.value = 0;\n    minutes.value = 0;\n    seconds.value = 0;\n    clearInterval(timer);\n    return;\n  }\n\n  // 从总秒数中拆分天/时/分/秒\n  const total = seconds.value;\n  days.value = Math.floor(total / (60 * 60 * 24));\n  const remainingAfterDays = total % (60 * 60 * 24);\n\n  hours.value = Math.floor(remainingAfterDays / (60 * 60));\n  const remainingAfterHours = remainingAfterDays % (60 * 60);\n\n  minutes.value = Math.floor(remainingAfterHours / 60);\n  seconds.value = remainingAfterHours % 60;\n\n  // 每秒递减\n  seconds.value--;\n};\n\n// 启动倒计时\nonMounted(() => {\n  calculateCountdown();  // 初始化\n  timer = setInterval(calculateCountdown, 1000);  // 每秒更新\n});\n\n// 清理定时器（防止内存泄漏）\nonUnmounted(() => {\n  if (timer) clearInterval(timer);\n});\n</script>\n"],"mappings":"AA2CA,SAASA,GAAG,EAAEC,SAAS,EAAEC,WAAW,QAAQ,KAAK;;AAEjD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IACA,MAAMC,KAAK,GAAGC,OA8BZ;;IAEF;IACA,MAAMC,IAAI,GAAGL,GAAG,CAAC,CAAC,CAAC;IACnB,MAAMM,KAAK,GAAGN,GAAG,CAAC,CAAC,CAAC;IACpB,MAAMO,OAAO,GAAGP,GAAG,CAAC,CAAC,CAAC;IACtB,MAAMQ,OAAO,GAAGR,GAAG,CAAC,CAAC,CAAC;IACtB,IAAIS,KAAK,GAAG,IAAI;;IAEhB;IACA,MAAMC,kBAAkB,GAAGA,CAAA,KAAM;MAC/B;MACA,IAAIF,OAAO,CAACG,KAAK,KAAK,CAAC,IAAIF,KAAK,KAAK,IAAI,EAAE;QACzCD,OAAO,CAACG,KAAK,GAAGR,KAAK,CAACS,YAAY;MACpC;;MAEA;MACA,IAAIJ,OAAO,CAACG,KAAK,IAAI,CAAC,EAAE;QACtBN,IAAI,CAACM,KAAK,GAAG,CAAC;QACdL,KAAK,CAACK,KAAK,GAAG,CAAC;QACfJ,OAAO,CAACI,KAAK,GAAG,CAAC;QACjBH,OAAO,CAACG,KAAK,GAAG,CAAC;QACjBE,aAAa,CAACJ,KAAK,CAAC;QACpB;MACF;;MAEA;MACA,MAAMK,KAAK,GAAGN,OAAO,CAACG,KAAK;MAC3BN,IAAI,CAACM,KAAK,GAAGI,IAAI,CAACC,KAAK,CAACF,KAAK,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;MAC/C,MAAMG,kBAAkB,GAAGH,KAAK,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;MAEjDR,KAAK,CAACK,KAAK,GAAGI,IAAI,CAACC,KAAK,CAACC,kBAAkB,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC;MACxD,MAAMC,mBAAmB,GAAGD,kBAAkB,IAAI,EAAE,GAAG,EAAE,CAAC;MAE1DV,OAAO,CAACI,KAAK,GAAGI,IAAI,CAACC,KAAK,CAACE,mBAAmB,GAAG,EAAE,CAAC;MACpDV,OAAO,CAACG,KAAK,GAAGO,mBAAmB,GAAG,EAAE;;MAExC;MACAV,OAAO,CAACG,KAAK,EAAE;IACjB,CAAC;;IAED;IACAV,SAAS,CAAC,MAAM;MACdS,kBAAkB,CAAC,CAAC,CAAC,CAAE;MACvBD,KAAK,GAAGU,WAAW,CAACT,kBAAkB,EAAE,IAAI,CAAC,CAAC,CAAE;IAClD,CAAC,CAAC;;IAEF;IACAR,WAAW,CAAC,MAAM;MAChB,IAAIO,KAAK,EAAEI,aAAa,CAACJ,KAAK,CAAC;IACjC,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}