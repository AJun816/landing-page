{"ast":null,"code":"import { ref, watch } from 'vue';\nexport default {\n  __name: 'FlipDigit',\n  props: ['value', 'label'],\n  emits: ['change', 'animation-end'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const props = __props;\n    const emit = __emit;\n    const currentValue = ref(props.value);\n    const nextValue = ref(props.value);\n    const isChanging = ref(false);\n\n    // 监测数字变化，触发翻转动画\n    watch(() => props.value, newVal => {\n      if (newVal !== currentValue.value) {\n        nextValue.value = newVal;\n        isChanging.value = true;\n        emit('change'); // 通知父组件“开始动画”\n\n        // 动画结束后重置状态\n        setTimeout(() => {\n          currentValue.value = newVal;\n          isChanging.value = false;\n          emit('animation-end'); // 通知父组件“动画结束”\n        }, 500); // 与 CSS 动画时长一致\n      }\n    });\n    const __returned__ = {\n      props,\n      emit,\n      currentValue,\n      nextValue,\n      isChanging,\n      ref,\n      watch\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","watch","props","__props","emit","__emit","currentValue","value","nextValue","isChanging","newVal","setTimeout"],"sources":["/Users/ajun/projects/github/landing-page/lotteryDraw/nigeria/src/components/countdown/FlipDigit.vue"],"sourcesContent":["<template>\n  <div class=\"flip-digit relative h-20 sm:h-24 w-12 sm:w-16 perspective\">\n    <!-- 上半部分卡片（当前数字，翻转时上翻） -->\n    <div \n      :class=\"{ 'animate-flip-top': isChanging }\"\n      class=\"flip-card top-card absolute inset-x-0 top-0 h-1/2 overflow-hidden rounded-t-lg bg-white shadow-inner flex items-end justify-center\"\n    >\n      <span class=\"text-3xl sm:text-4xl font-bold text-black pb-1\">{{ currentValue }}</span>\n    </div>\n    \n    <!-- 下半部分卡片（当前数字，保持静止） -->\n    <div class=\"flip-card bottom-card absolute inset-x-0 bottom-0 h-1/2 overflow-hidden rounded-b-lg bg-white shadow-inner flex items-start justify-center\">\n      <span class=\"text-3xl sm:text-4xl font-bold text-black pt-1\">{{ currentValue }}</span>\n    </div>\n    \n    <!-- 翻转中的上半部分（显示下一个数字，下翻动画） -->\n    <div \n      v-if=\"isChanging\"\n      class=\"flip-card flipping-card absolute inset-x-0 top-0 h-1/2 overflow-hidden rounded-t-lg bg-white shadow-inner flex items-end justify-center transform origin-bottom\"\n    >\n      <span class=\"text-3xl sm:text-4xl font-bold text-black pb-1\">{{ nextValue }}</span>\n    </div>\n    \n    <!-- 时间单位标签（如“分”“秒”） -->\n    <div class=\"absolute -bottom-5 left-1/2 -translate-x-1/2 whitespace-nowrap text-xs font-medium text-white\">\n      {{ label }}\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, watch, defineEmits } from 'vue';\n\nconst props = defineProps(['value', 'label']);\nconst emit = defineEmits(['change', 'animation-end']);\n\nconst currentValue = ref(props.value);\nconst nextValue = ref(props.value);\nconst isChanging = ref(false);\n\n// 监测数字变化，触发翻转动画\nwatch(() => props.value, (newVal) => {\n  if (newVal !== currentValue.value) {\n    nextValue.value = newVal;\n    isChanging.value = true;\n    emit('change'); // 通知父组件“开始动画”\n    \n    // 动画结束后重置状态\n    setTimeout(() => {\n      currentValue.value = newVal;\n      isChanging.value = false;\n      emit('animation-end'); // 通知父组件“动画结束”\n    }, 500); // 与 CSS 动画时长一致\n  }\n});\n</script>\n\n<style scoped>\n.flip-card {\n  @apply transition-all duration-500 ease-in-out;\n}\n\n/* 上半卡片 向上翻转 90° 动画 */\n.animate-flip-top {\n  animation: flip-top 0.5s ease-in-out;\n}\n\n@keyframes flip-top {\n  0% {\n    transform: rotateX(0deg);\n    background-color: white;\n  }\n  50%, 100% {\n    transform: rotateX(-90deg);\n    background-color: #f5f5f5; /* 翻转动画中略带灰色 */\n  }\n}\n\n/* 翻转中卡片 向下翻转 90° 动画 */\n.flipping-card {\n  animation: flip-bottom 0.5s ease-in-out;\n}\n\n@keyframes flip-bottom {\n  0% {\n    transform: rotateX(90deg);\n    background-color: #f5f5f5;\n  }\n  50%, 100% {\n    transform: rotateX(0deg);\n    background-color: white;\n  }\n}\n</style>"],"mappings":"AA+BA,SAASA,GAAG,EAAEC,KAAkB,QAAQ,KAAK;;;;;;;;;;IAE7C,MAAMC,KAAK,GAAGC,OAA+B;IAC7C,MAAMC,IAAI,GAAGC,MAAwC;IAErD,MAAMC,YAAY,GAAGN,GAAG,CAACE,KAAK,CAACK,KAAK,CAAC;IACrC,MAAMC,SAAS,GAAGR,GAAG,CAACE,KAAK,CAACK,KAAK,CAAC;IAClC,MAAME,UAAU,GAAGT,GAAG,CAAC,KAAK,CAAC;;IAE7B;IACAC,KAAK,CAAC,MAAMC,KAAK,CAACK,KAAK,EAAGG,MAAM,IAAK;MACnC,IAAIA,MAAM,KAAKJ,YAAY,CAACC,KAAK,EAAE;QACjCC,SAAS,CAACD,KAAK,GAAGG,MAAM;QACxBD,UAAU,CAACF,KAAK,GAAG,IAAI;QACvBH,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;;QAEhB;QACAO,UAAU,CAAC,MAAM;UACfL,YAAY,CAACC,KAAK,GAAGG,MAAM;UAC3BD,UAAU,CAACF,KAAK,GAAG,KAAK;UACxBH,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;QACzB,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;MACX;IACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}