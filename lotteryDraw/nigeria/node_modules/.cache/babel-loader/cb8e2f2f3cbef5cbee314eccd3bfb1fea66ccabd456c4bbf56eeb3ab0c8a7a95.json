{"ast":null,"code":"import { ref, onMounted, onUnmounted, computed } from 'vue';\nconst radius = 45;\nexport default {\n  __name: 'CircularCountdown',\n  props: {\n    countdown: {\n      type: Object,\n      required: true\n    }\n  },\n  emits: ['end'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const props = __props;\n    const emit = __emit;\n    const remaining = ref({\n      minutes: 0,\n      seconds: 0,\n      milliseconds: 0\n    });\n    let timer = null;\n\n    // SVG 圆周长度\n    const circumference = 2 * Math.PI * radius;\n    const offset = ref(circumference);\n\n    // 计算剩余时间\n    const updateRemaining = () => {\n      const now = Date.now();\n      const elapsed = now - startTime.value;\n      const remainingTime = Math.max(props.countdown.totalDuration - elapsed, 0);\n      if (remainingTime <= 0) {\n        stopCountdown();\n        emit('end');\n        return;\n      }\n      const mins = Math.floor(remainingTime / 60000);\n      const secs = Math.floor(remainingTime % 60000 / 1000);\n      const msecs = remainingTime % 1000;\n      remaining.value = {\n        minutes: mins.toString().padStart(2, '0'),\n        seconds: secs.toString().padStart(2, '0'),\n        milliseconds: msecs.toString().padStart(3, '0')\n      };\n\n      // 更新进度条\n      offset.value = circumference - remainingTime / props.countdown.totalDuration * circumference;\n    };\n\n    // 启动倒计时\n    const startTime = ref(Date.now());\n    const startCountdown = () => {\n      timer = setInterval(updateRemaining, 10); // 毫秒级更新\n    };\n\n    // 停止倒计时\n    const stopCountdown = () => {\n      if (timer) clearInterval(timer);\n      timer = null;\n    };\n\n    // 生命周期钩子\n    onMounted(() => {\n      startCountdown();\n    });\n    onUnmounted(() => {\n      stopCountdown();\n    });\n    const __returned__ = {\n      props,\n      emit,\n      remaining,\n      get timer() {\n        return timer;\n      },\n      set timer(v) {\n        timer = v;\n      },\n      radius,\n      circumference,\n      offset,\n      updateRemaining,\n      startTime,\n      startCountdown,\n      stopCountdown,\n      ref,\n      onMounted,\n      onUnmounted,\n      computed\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","onUnmounted","computed","radius","props","__props","emit","__emit","remaining","minutes","seconds","milliseconds","timer","circumference","Math","PI","offset","updateRemaining","now","Date","elapsed","startTime","value","remainingTime","max","countdown","totalDuration","stopCountdown","mins","floor","secs","msecs","toString","padStart","startCountdown","setInterval","clearInterval"],"sources":["/Users/ajun/projects/github/landing-page/lotteryDraw/nigeria/src/components/countdown/CircularCountdown.vue"],"sourcesContent":["<template>\n  <div class=\"circular-countdown flex flex-col items-center justify-center p-4\">\n    <!-- 标题 -->\n    <div class=\"title text-center mb-6 text-white text-2xl md:text-3xl font-bold bg-clip-text bg-gradient-to-r from-blue-400 to-purple-600\">\n      {{ countdown.label }}\n    </div>\n\n    <!-- 环形倒计时 -->\n    <div class=\"relative w-64 h-64 md:w-80 md:h-80\">\n      <svg class=\"w-full h-full\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMinYMin meet\">\n        <!-- 背景圆 -->\n        <circle\n          class=\"text-gray-700\"\n          cx=\"50\"\n          cy=\"50\"\n          r=\"45\"\n          stroke-width=\"10\"\n        />\n        <!-- 动态进度圆 -->\n        <circle\n          :stroke-dasharray=\"circumference\"\n          :stroke-dashoffset=\"offset\"\n          class=\"transition-all duration-300 ease-linear stroke-blue-500\"\n          cx=\"50\"\n          cy=\"50\"\n          r=\"45\"\n          stroke-width=\"10\"\n        />\n      </svg>\n\n      <!-- 倒计时数字 -->\n      <div class=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center\">\n        <div class=\"text-white text-4xl md:text-5xl font-bold\">\n          {{ remaining.minutes }}\n          <span class=\"text-lg md:text-xl\">{{ countdown.labels.minute }}</span>\n        </div>\n        <div class=\"text-white text-4xl md:text-5xl font-bold mt-1\">\n          {{ remaining.seconds }}\n          <span class=\"text-lg md:text-xl\">{{ countdown.labels.second }}</span>\n        </div>\n        <div class=\"text-white text-2xl md:text-3xl font-medium mt-1\">\n          {{ remaining.milliseconds }}\n          <span class=\"text-sm md:text-base\">{{ countdown.labels.millisecond }}</span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted, computed } from 'vue'\n\nconst props = defineProps({\n  countdown: {\n    type: Object,\n    required: true\n  }\n})\n\nconst emit = defineEmits(['end'])\n\nconst remaining = ref({ minutes: 0, seconds: 0, milliseconds: 0 })\nlet timer = null\n\n// SVG 圆周长度\nconst radius = 45\nconst circumference = 2 * Math.PI * radius\nconst offset = ref(circumference)\n\n// 计算剩余时间\nconst updateRemaining = () => {\n  const now = Date.now()\n  const elapsed = now - startTime.value\n  const remainingTime = Math.max(props.countdown.totalDuration - elapsed, 0)\n\n  if (remainingTime <= 0) {\n    stopCountdown()\n    emit('end')\n    return\n  }\n\n  const mins = Math.floor(remainingTime / 60000)\n  const secs = Math.floor((remainingTime % 60000) / 1000)\n  const msecs = remainingTime % 1000\n\n  remaining.value = {\n    minutes: mins.toString().padStart(2, '0'),\n    seconds: secs.toString().padStart(2, '0'),\n    milliseconds: msecs.toString().padStart(3, '0')\n  }\n\n  // 更新进度条\n  offset.value = circumference - (remainingTime / props.countdown.totalDuration) * circumference\n}\n\n// 启动倒计时\nconst startTime = ref(Date.now())\nconst startCountdown = () => {\n  timer = setInterval(updateRemaining, 10) // 毫秒级更新\n}\n\n// 停止倒计时\nconst stopCountdown = () => {\n  if (timer) clearInterval(timer)\n  timer = null\n}\n\n// 生命周期钩子\nonMounted(() => {\n  startCountdown()\n})\n\nonUnmounted(() => {\n  stopCountdown()\n})\n</script>\n\n<style scoped>\n/* SVG 动画优化 */\ncircle {\n  transition: stroke-dashoffset 0.3s linear;\n}\n</style>"],"mappings":"AAkDA,SAASA,GAAG,EAAEC,SAAS,EAAEC,WAAW,EAAEC,QAAQ,QAAQ,KAAI;AAe1D,MAAMC,MAAM,GAAG,EAAC;;;;;;;;;;;;;;;IAbhB,MAAMC,KAAK,GAAGC,OAAA;IAOd,MAAMC,IAAI,GAAGC,MAAA;IAEb,MAAMC,SAAS,GAAGT,GAAG,CAAC;MAAEU,OAAO,EAAE,CAAC;MAAEC,OAAO,EAAE,CAAC;MAAEC,YAAY,EAAE;IAAE,CAAC;IACjE,IAAIC,KAAK,GAAG,IAAG;;IAEf;IAEA,MAAMC,aAAa,GAAG,CAAC,GAAGC,IAAI,CAACC,EAAE,GAAGZ,MAAK;IACzC,MAAMa,MAAM,GAAGjB,GAAG,CAACc,aAAa;;IAEhC;IACA,MAAMI,eAAe,GAAGA,CAAA,KAAM;MAC5B,MAAMC,GAAG,GAAGC,IAAI,CAACD,GAAG,CAAC;MACrB,MAAME,OAAO,GAAGF,GAAG,GAAGG,SAAS,CAACC,KAAI;MACpC,MAAMC,aAAa,GAAGT,IAAI,CAACU,GAAG,CAACpB,KAAK,CAACqB,SAAS,CAACC,aAAa,GAAGN,OAAO,EAAE,CAAC;MAEzE,IAAIG,aAAa,IAAI,CAAC,EAAE;QACtBI,aAAa,CAAC;QACdrB,IAAI,CAAC,KAAK;QACV;MACF;MAEA,MAAMsB,IAAI,GAAGd,IAAI,CAACe,KAAK,CAACN,aAAa,GAAG,KAAK;MAC7C,MAAMO,IAAI,GAAGhB,IAAI,CAACe,KAAK,CAAEN,aAAa,GAAG,KAAK,GAAI,IAAI;MACtD,MAAMQ,KAAK,GAAGR,aAAa,GAAG,IAAG;MAEjCf,SAAS,CAACc,KAAK,GAAG;QAChBb,OAAO,EAAEmB,IAAI,CAACI,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;QACzCvB,OAAO,EAAEoB,IAAI,CAACE,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;QACzCtB,YAAY,EAAEoB,KAAK,CAACC,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG;MAChD;;MAEA;MACAjB,MAAM,CAACM,KAAK,GAAGT,aAAa,GAAIU,aAAa,GAAGnB,KAAK,CAACqB,SAAS,CAACC,aAAa,GAAIb,aAAY;IAC/F;;IAEA;IACA,MAAMQ,SAAS,GAAGtB,GAAG,CAACoB,IAAI,CAACD,GAAG,CAAC,CAAC;IAChC,MAAMgB,cAAc,GAAGA,CAAA,KAAM;MAC3BtB,KAAK,GAAGuB,WAAW,CAAClB,eAAe,EAAE,EAAE,CAAC,EAAC;IAC3C;;IAEA;IACA,MAAMU,aAAa,GAAGA,CAAA,KAAM;MAC1B,IAAIf,KAAK,EAAEwB,aAAa,CAACxB,KAAK;MAC9BA,KAAK,GAAG,IAAG;IACb;;IAEA;IACAZ,SAAS,CAAC,MAAM;MACdkC,cAAc,CAAC;IACjB,CAAC;IAEDjC,WAAW,CAAC,MAAM;MAChB0B,aAAa,CAAC;IAChB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}